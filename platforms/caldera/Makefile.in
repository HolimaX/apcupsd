# Makefile template
#
# Copyright (C) 1999-2002 Riccardo Facchetti <riccardo@master.oasi.gpa.it>
#
# Modified for Caldera, 3 Jan 2001 by John Pinner (john@clocksoft.com)
#

# Default variables
@VARIABLES@
# TOP source directory.
topdir = @top_srcdir@
top_builddir = $(topdir)

# Include the default make targets: to be put before the all-targets: rule.
@TARGETS@

all-targets: Makefile

install:
	@echo "Installing apcupsd boot script..."
	$(INSTALL_PROGRAM) -m 744 apcupsd /etc/rc.d/init.d/apcupsd
	@echo "Installing symlinks..."
	@ln -sf /etc/rc.d/init.d/apcupsd /etc/rc.d/rc2.d/K20apcupsd
	@ln -sf /etc/rc.d/init.d/apcupsd /etc/rc.d/rc2.d/S20apcupsd
	@ln -sf /etc/rc.d/init.d/apcupsd /etc/rc.d/rc3.d/K20apcupsd
	@ln -sf /etc/rc.d/init.d/apcupsd /etc/rc.d/rc3.d/S20apcupsd
	sh ./inst.sh install

uninstall:
	@echo "Removing symlinks..."
	@rm -f /etc/rc.d/rc2.d/K20apcupsd
	@rm -f /etc/rc.d/rc2.d/S20apcupsd
	@rm -f /etc/rc.d/rc3.d/K20apcupsd
	@rm -f /etc/rc.d/rc3.d/S20apcupsd
	@echo "Removing boot script..."
	@rm -f /etc/rc.d/init.d/apcupsd
	sh ./inst.sh uninstall

clean:

distclean:
	@rm -f apcupsd Makefile apccontrol.sh
	@rm -rf CVS
