             Technical notes on version 3.11.9
                        Adam Kropelin

General:
1Sep05
- SNMP: UPSINFO::G[] and UPSINFO::X[] to enum conversion.
- CGI: Fix C++ compilation.
- Kill unused (or nearly unused) fields from class UPSINFO. Also remove
  unused structs while we're in the neighborhood.
31Aug05
- USB: Make older gcc happy by not introducing a local variable in
  the middle of a switch statement.
- USB: My RS 1500 models seem to return APCLineFailCause=8 for
  transitions due to utility power failure. Update return value
  decoding to account for this.
- hid-ups: Name usage 0xFF860052 as APCLineFailCause.
- Convert UPSINFO::G[] to LastXferCause enumeration and eliminate
  the need for core code to know about last xfer CIs.
- Kill off UPSINFO::X[], replacing it with enum SelfTestResult.
- Add support for tracking battery presence via new NOBATT status
  flag.
30Aug05
- Rephrase comm{ok,failure} messages to not assume a serial port
  connection.
- USB: Add CI_APCLineFailStatus support. This allows apcupsd to
  distinguish battery transitions due to self test from those 
  due to utility power failure.
- Increase self test grace period to 20 seconds (from 12) to
  accomodate lengthy USB event hysteresis imposed by the UPS.
- USB: Set self test result string.
- USB: Fix excessive unlocking bug in pusb_ups_check_state().
- NET: Fix minor copy-n-paste error in net_ups_read_volatile_data.
23Aug05
- USB: Use CI_RETPCT instead of CI_APCDelayBeforeStartup which is not
  only cleaner but also causes RETPCT to be properly reported.
18Aug05
- Fix powerflute SIGALRM timer on Solaris by reinstalling signal
  handler whenever the timer expires.
15Aug05
- Increase inter-URB delay to 20 msec as per 3.10.18.
- Fix powerflute compilation on Solaris by preferring
  ncurses/*.h headers over include/*.h when both
  exist.
- C++ fixes for compilation on Solaris.
- BSD and Linux USB rework to report events via callback.
08Jul05
- Bump version number and date
- Back-port inter-URB delay lockup fix from Branch-3_10_17
- Significantly rework USB driver event and poll handling.
  More cleanup to come, and BSD driver still needs update.
22Jun05
- bsd-usb: compile fix
- linux-usb: Filter duplicate reports in pusb_ups_check_state().
- linux-usb: Strengthen CI <-> usage association 
- linux-usb: Only exit event read() loop when an 'important' CI
  is processed
- Add a parameterized version of set_battlow() and make use of it.
- linux-usb: Add some more 'important'-looking events
08Jun05
- Retroactively create my own techlog
07Jun05
- Rename mainsback.in to offbattery.in so default power loss/return
  actions are symmetrical.
- Fix bsd-usb build on FreeBSD-4.11 by allowing Makefiles to add 
  their own include flags via EXTRAINCS.
- Exclude HPUX from signal recursion
31May05
- Code style normalization.
19May05
- C++ cleanliness fixes in libusbhid
27Apr05
- Merge hidu_set_report bug fix from Branch-3_10_17.
24Apr05
- Make apctest work with empty DEVICE setting for USB driver.
22Apr05
- Merge BSD UHCI lockup fixes from Branch-3_10_17.
04Apr05
- Remove trailing commas in enum declarations to make AIX 5.1 +
  VACPP 6.0 happy.
29Mar05
- Make SNMP missing SNMP libs cause ./configure fail
- Remove references to serial port in comms lost/restored messages
  in apccontrol.in since in UPSes may be connected by other means
  (USB, net, etc.).
- More unsafe string conversions. strcpy -> astrncpy and
  sprintf -> asnprintf.
22Mar05
- Convert some potentially unsafe string functions to apcupsd safe
  versions. None of the usages were actually unsafe, but this change
  pacifies OpenBSD and prevents future bugs.
